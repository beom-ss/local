data ex2_10;
input husband wife;
cards;
186 175
180 168
160 154
186 166
163 162
172 152
192 179
170 163
174 172
191 170
182 170
178 147
181 165
168 162
162 154
188 166
168 167
183 174
188 173
166 164
180 163
176 163
185 171
169 161
182 167
162 160
169 165
176 167
180 175
157 157
170 172
186 181
180 166
188 181
153 148
179 169
175 170
165 157
156 162
185 174
172 168
166 162
179 159
181 155
176 171
170 159
165 164
183 175
162 156
192 180
185 167
163 157
185 167
170 157
176 168
176 167
160 145
167 156
157 153
180 162
172 156
184 174
185 160
165 152
181 175
170 169
161 149
188 176
181 165
156 143
161 158
152 141
179 160
170 149
170 160
165 148
165 154
169 171
171 165
192 175
176 161
168 162
169 162
184 176
171 160
161 158
185 175
184 174
179 168
184 177
175 158
173 161
164 146
181 168
187 178
181 170
run;
/*[표 2.11] 입력*/

proc corr data=ex2_10 cov;
var Husband Wife;
run;
/* (a) Husband와 Wife의 키  공분산은 69.41293860 이다.
(c) 상관계수는 0.76339이다.*/

data ex2_10_;
set ex2_10;
husbandd=husband*0.01;
wifee=wife*0.01;
run;
/*데이터 ex2_10_를 만드는데, 각각 0.01을 곱한다. */

proc corr data=ex2_10_ cov;
var husbandd wifee;
run;
/*ex2_10_ 으로 돌리면, (b) 공분산 0.0069412939 이다. (d) 상관계수 0.76339 로 변화 없다. */ 


data ex2_10__;
set ex2_10;
wife2=husband-5;
run;
/*남편보다 5cm작은 부인의 키(Wife2)를 ex_10__ 에 저장한다.*/

proc corr data=ex2_10__;
var husband wife2;
run;
/*(e)상관계수는 1이다. 적확한 선형 관계에 있다.*/


proc reg data=ex2_10;
model Husband=Wife;
run;
proc reg data=ex2_10;
model Wife= Husband;
run;
/*(f) 모두 beta0 와 beta1을 기각하므로  어느 것을 종속변수로 잡아도 상관없다. 큰 영향 없다. wife 를 종속변수로 하겠다.   
       
   (g)(h) 밑의 proc reg 돌린 결과 beta0,beta1 둘다 기각 하므로 , 존재가 유의 하다 라고 할수 있다.  <---- 가설 ?? 검정 과정 ???

   (j)(k) 남편키와 아내키의 corr값이 0.7634이고, beta1 이 기각 했으므로,  x 와 y 는 관계가 있다 라고 할수 있다.
           비슷한 키의 남녀가 결혼한다고 생각할 수 있다.*/


data ex3_14;
input state$ age hs income black female price sales;
cards;
AL 27.0 41.3 2948.0 26.2 51.7 42.7 89.8
AK 22.9 66.7 4644.0 3.0 45.7 41.8 121.3
AZ 26.3 58.1 3665.0 3.0 50.8 38.5 115.2
AR 29.1 39.9 2878.0 18.3 51.5 38.8 100.3
CA 28.1 62.6 4493.0 7.0 50.8 39.7 123.0
CO 26.2 63.9 3855.0 3.0 50.7 31.1 124.8
CT 29.1 56.0 4917.0 6.0 51.5 45.5 120.0
DE 26.8 54.6 4524.0 14.3 51.3 41.3 155.0
DC 28.4 55.2 5079.0 71.1 53.5 32.6 200.4
FL 32.3 52.6 3738.0 15.3 51.8 43.8 123.6
GA 25.9 40.6 3354.0 25.9 51.4 35.8 109.9
HI 25.0 61.9 4623.0 1.0 48.0 36.7 82.1
ID 26.4 59.5 3290.0 0.3 50.1 33.6 102.4
IL 28.6 52.6 4507.0 12.8 51.5 41.4 124.8
IN 27.2 52.9 3772.0 6.9 51.3 32.2 134.6
IO 28.8 59.0 3751.0 1.2 51.4 38.5 108.5
KA 28.7 59.9 3853.0 4.8 51.0 38.9 114.0
KY 27.5 38.5 3112.0 7.2 50.9 30.1 155.8
LA 24.8 42.2 3090.0 29.8 51.4 39.3 115.9
ME 28. 54.7 3302.0 0.3 51.3 38.8 128.5
MD 27.1 52.3 4309.0 17.8 51.1 34.2 123.5
MA 29.0 58.5 4340.0 3.1 52.2 41.0 124.3
MI 26.3 52.8 4180.0 11.2 51.0 39.2 128.6
MN 26.8 57.6 3859.0 0.9 51.0 40.1 104.3
MS 25.1 41.0 2626.0 36.8 51.6 37.5 93.4 
MO 29.4 48.8 3781.0 10.3 51.8 36.8 121.3
MT 27.1 59.2 3500.0 0.3 50.0 34.7 111.2
NB 28.6 59.3 3789.0 2.7 51.2 34.7 108.1
NV 27.8 65.2 4563.0 5.7 49.3 44.0 189.5
NH 28.0 57.6 3737.0 0.3 51.1 34.1 265.7
NJ 30.1 52.5 4701.0 10.8 51.6 41.7 120.7
NM 23.9 55.2 3077.0 1.9 50.7 41.7 90.0
NY 30.3 52.7 4712.0 11.9 52.2 41.7 119.0
NC 26.5 38.5 3252.0 22.2 51.0 29.4 172.4
ND 26.4 50.3 3086.0 0.4 49.5 38.9 93.8
OH 27.7 53.2 4020.0 9.1 51.5 38.1 121.6
OK 29.4 51.6 3387.0 6.7 51.3 39.8 108.4
OR 29.0 60.0 3719.0 1.3 51.0 29.0 157.0
PA 30.7 50.2 3971.0 8.0 52.0 44.7 107.3
RI 29.2 46.4 3959.0 2.7 50.9 40.2 123.9
SC 24.8 37.8 2990.0 30.5 50.9 34.3 103.6
SD 27.4 53.3 3123.0 0.3 50.3 38.5 92.7
TN 28.1 41.8 3119.0 15.8 51.6 41.6 99.8
TX 26.4 47.4 3606.0 12.5 51.0 42.0 106.4
UT 23.1 67.3 3227.0 0.6 50.6 36.6 65.5
VT 26.8 57.1 3468.0 0.2 51.1 39.5 122.6
VA 26.8 47.8 3712.0 18.5 50.6 30.2 124.3
WA 27.5 63.5 4053.0 2.1 50.3 40.3 96.7
WV 30.0 41.6 3061.0 3.9 51.6 41.6 114.5
WI 27.2 54.5 3812.0 2.9 50.9 40.2 106.4
WY 27.2 62.9 3815.0 0.8 50.0 34.4 132.2
;
run;

proc reg data=ex3_14;
model sales=age HS income black female price;
test female=0;
run;
/*(a) FM은 모두 들어간 모델
        RM은 female을 제외한 모델
H0: female=0 이고 검정결과 귀무가설을 기각하지 못한다. 따라서 sales를 설명하는데 female을 추가할 필요가 없다.*/

proc reg data=ex3_14;
model sales=age HS income black female price;
test female=HS=0;
run;
/*(b)FM은 모두 들어간 모델
        RM은 female HS를 제외한 모델
H0: female=HS=0 이고 검정결과 귀무가설을 기각하지 못한다.  따라서 sales를 설명하는데 female,HS변수를 추가할 필요가 없다.*/


proc reg data=ex3_14;
model sales=age HS income black female price /i;
run;

data t_value;
alpha = 0.05;
df = 50-6-1;
t = tinv(1-alpha/2,df);
run;

/*(c) /i 를 해서 회귀 시켜 주면 , 각각의 beta 추정값이 나오는데 , beta(income) 의 추정값은  0.01895 이고 ,*/
/*    C.I = (0.01895 - 2.0166921992*0.01022 , 0.01895 + 2.0166921992*0.01022)*/
   


proc reg data=ex3_14;
model sales=age HS black female price;
run;
/*(d) income 만 제외 하고 돌리면 R^2 =   0.2678 이다.*/

proc reg data=ex3_14;
model sales=age income price;
run;
/*(e) 3가지 변수만으로 돌리면 R^2 =   0.3032 이다.*/

proc reg data=ex3_14;
model sales=income;
run;

/*(f) income 으로만 회귀시키면 R^2=0.1063 이다.*/


